<?php

function pastry_quiz_menu() {
  $items['quiz'] = array(
      'title' => 'What should I eat!?',
      'page callback' => 'drupal_get_form',
      'page arguments' => array('pastry_quiz_form'),
      'access callback' => TRUE,
      'type' => MENU_NORMAL_ITEM,
  );
  $items['quiz_question_2'] = array(
      'page callback' => 'drupal_get_form',
      'page arguments' => array('pastry_quiz_form'),
      'access callback' => TRUE,
      'type' => MENU_CALLBACK,
  );

  return $items;
}

function pastry_quiz_form() {
  var_dump($_GET['q']);
  if ($_GET['q'] == 'quiz') {
    $form['gluten'] = array(
      '#title' => 'Gluten Intollerance',
      '#type' => 'radios',
      '#description' => t('Are you gluten intollerant?'),
      '#options' => array(
        0 => t('Yes'),
        1 => t('No'),
      ),
      '#required' => TRUE,
    );
  } else if ($_GET['q'] == 'quiz_question_2') {
    $form['chocolate'] = array(
      '#title' => 'Chocolate',
      '#type' => 'radios',
      '#description' => t('Do you like chocolate?'),
      '#options' => array(
          0 => t('Yes'),
          1 => t('No'),
      ),
      '#required' => TRUE,
    );
  }

  $form['submit'] = array(
      '#type' => 'submit',
      '#value' => 'submit',
  );

  return $form;
}

function pastry_quiz_form_submit($form, &$form_state) {
  if ($form['gluten']) {
    $_SESSION['gluten'] = $form['gluten']['#value'];
    $_SESSION['question'] = 2;
    $form_state['redirect'] = 'quiz_question_2';
  } else if ($form['chocolate']) {
    $_SESSION['chocolate'] = $form['chocolate']['#value'];
    $form_sate['redirect'] = '';
  }
}
