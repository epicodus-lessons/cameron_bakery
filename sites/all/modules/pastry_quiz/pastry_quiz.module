<?php

function pastry_quiz_menu() {
  $items['quiz'] = array(
    'title' => 'What baked goods should I eat!?',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('quiz1_form'),
    'access callback' => TRUE,
    'type' => MENU_NORMAL_ITEM,
  );

  $items['quiz_question_2'] = array(
    'page callback' => 'drupal_get_form',
    'page arguments' => array('quiz2_form'),
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );

  $items['quiz_question_3'] = array(
    'page callback' => 'drupal_get_form',
    'page arguments' => array('quiz3_form'),
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );

  $items['quiz_results'] = array(
    'title' => 'Quiz Results!',
    'page callback' => 'quiz_success',
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );

  return $items;
}

function quiz1_form() {
  $form['fruit'] = array(
    '#title' => 'Do You like Fruit?',
    '#type' => 'radios',
    '#description' => t(''),
    '#default_value' => variable_get('comment_preview', 0),
    '#options' => array(
      t('Yes'),
      t('No'),
    ),
    '#required' => TRUE,
  );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'submit',
    );
    return $form;
  }


  function quiz2_form() {
    $form['chocolate'] = array(
      '#title' => 'Do you want chocolate?',
      '#type' => 'radios',
      '#description' => t('Chocoholic?'),
      '#default_value' => variable_get('comment_preview', 0),
      '#options' => array(
        t('Yes'),
        t('No'),
      ),
      '#required' => TRUE,
      );
      $form['submit'] = array(
      '#type' => 'submit',
      '#value' => 'submit',
    );
    return $form;
  }


  function quiz3_form() {
    $form['gluten'] = array(
      '#title' => 'Are you gluten intollerant?',
      '#type' => 'radios',
      '#description' => t('Got wheat?'),
      '#default_value' => variable_get('comment_preview', 0),
      '#options' => array(
        t('Yes'),
        t('No'),
      ),
      '#required' => TRUE,
      );
      $form['submit'] = array(
      '#type' => 'submit',
      '#value' => 'submit',
    );
    return $form;
  }

  function quiz1_form_submit($form, &$form_state) {
    $fruit = $form_state['values']['fruit'];
    $_SESSION['fruit'] = $fruit;
    $form_state['redirect'] = 'quiz_question_2';
  }

  function quiz2_form_submit($form, &$form_state) {
    $chocolate = $form_state['values']['chocolate'];
    $_SESSION['chocolate'] = $chocolate;
    $form_state['redirect'] = 'quiz_question_3';
  }

  function quiz3_form_submit($form, &$form_state) {
    $gluten = $form_state['values']['gluten'];
    $_SESSION['gluten'] = $gluten;
    $form_state['redirect'] = 'quiz_results';
  }

  function quiz_success() {
    $fruit = $_SESSION['fruit'];
    $chocolate = $_SESSION['chocolate'];
    $gluten = $_SESSION['gluten'];

    if ($fruit === '0' && $chocolate === '0' && $gluten === '0') {
      return '<p>Try our gluten free chocolate cherry truffels!</p>';
    }

    if ($fruit === '0' && $chocolate === '1' && $gluten === '1') {
      return '<p>We recommend our Bluberry Muffins!</p>';
    }

    if ($fruit === '0' && $chocolate === '0' && $gluten === '1') {
      return '<p>Do a Mango Chocolate Donut!</p>';
    }

    if ($fruit === '1' && $chocolate === '1' && $gluten === '1') {
      return '<p>This calls for a Croissant!</p>';
    }

    if ($fruit === '0' && $chocolate === '1' && $gluten === '0') {
      return '<p>You might like our gluten free fruit danishes!</p>';
    }

    if ($fruit === '1' && $chocolate === '0' && $gluten === '1') {
      return '<p>Slam back a few brownies to help you stifle your emotions!</p>';
    }

    if ($fruit === '1' && $chocolate === '0' && $gluten === '0') {
      return '<p>Chocolate chip corn muffins!</p>';
    }

    if ($fruit === '1' && $chocolate === '1' && $gluten === '0') {
      return '<p>Eat these gluten free shortbread cookies!</p>';
    }
  }
