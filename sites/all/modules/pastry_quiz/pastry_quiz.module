<?php

    function pastry_quiz_menu() {
        $items['quiz'] = array(
            'title' => 'What should I eat!?',
            'page callback' => 'drupal_get_form',
            'page arguments' => array('start_form'),
            'access callback' => TRUE,
            'type' => MENU_NORMAL_ITEM,
        );
        $items['quiz_question_1'] = array(
            'page callback' => 'drupal_get_form',
            'page arguments' => array('question1_form'),
            'access callback' => TRUE,
            'type' => MENU_CALLBACK,
        );
        $items['quiz_question_2'] = array(
            'page callback' => 'drupal_get_form',
            'page arguments' => array('question2_form'),
            'access callback' => TRUE,
            'type' => MENU_CALLBACK,
        );
        $items['quiz_question_3'] = array(
            'page callback' => 'drupal_get_form',
            'page arguments' => array('question3_form'),
            'access callback' => TRUE,
            'type' => MENU_CALLBACK,
        );
        $items['quiz_results'] = array(
            'title' => 'Quiz Results!',
            'page callback' => 'quiz_success',
            'access callback' => TRUE,
            'type' => MENU_CALLBACK,
        );
        return $items;
    }
    function question1_form() {
      $form['gluten'] = array(
          '#title' => 'Gluten Intollerance',
          '#type' => 'radios',
          '#description' => t('Are you gluten intollerant?'),
          '#options' => array(
              t('Yes'),
              t('No'),
          ),
          '#required' => TRUE,
      );
      $form['submit'] = array(
          '#type' => 'submit',
          '#value' => 'submit',
      );
      return $form;
    }
    function question2_form() {
      $form['dairy'] = array(
          '#title' => 'Dairy Intollerance',
          '#type' => 'radios',
          '#description' => t('Are you Dairy intollerant?'),
          '#options' => array(
              t('Yes'),
              t('No'),
          ),
          '#required' => TRUE,
      );
      $form['submit'] = array(
          '#type' => 'submit',
          '#value' => 'submit',
      );
      return $form;
    }
    function question3_form() {
      $form['taste'] = array(
          '#title' => 'What do you perfer?',
          '#type' => 'radios',
          '#description' => t('Which do you perfer?'),
          '#options' => array(
              t('Sweet'),
              t('Savory'),
              t('Spicy'),
          ),
          '#required' => TRUE,
      );
      $form['submit'] = array(
          '#type' => 'submit',
          '#value' => 'submit',
      );
      return $form;
    }

function start_form() {
    $form['submit'] = array(
        '#type' => 'submit',
        '#value' => 'Take the Quiz!',
    );
    return $form;
}

function quiz_success() {
  $gluten = $_SESSION['values']['gluten'];
  if ($gluten) {
    return '<p>get a donut!</p>';
  } else {
    return "<p>cool! we've got stuff for you too!/p>";
  }
}

function start_form_submit($form, &$form_state) {
  $form_state['redirect'] = 'quiz_question_1';
}

function question1_form_submit($form, &$form_state) {
  $form_state['redirect'] = 'quiz_question_2';
}

function question2_form_submit($form, &$form_state) {
  $form_state['redirect'] = 'quiz_question_3';
}

function question3_form_submit($form, &$form_state) {
  $form_state['redirect'] = 'quiz_results';
}

function quiz_form_submit($form, &$form_state) {
  $form['gluten']['default_value'] = variable_get('comment_preview', 1);
  $gluten = $form_state['values']['gluten'];
  $_SESSION['gluten'] = $gluten;
  $form_state['redirect'] = 'quiz_results';
}
